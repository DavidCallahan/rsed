#! ./rsed
set $SEP = "^==============================================================="
skip past $SEP
if "^(.*\S)\s+relative  time/iter  iters/s" then
   set $target = $1
else
   error "expected benchmark header"
end
skip past $SEP
foreach to $SEP
   columns 48 58 69
   set $name = trim($0)
   set $time = trim($2)
   set $rate = trim($3)
   if $time =~ "([0-9.]+)(.*)?" then
      set $time = $1
      set $units = $2
   else 
      set $units = "s"
   end
   if $rate =~ "([0-9.]+)(.*)?" then
      set $rate = $1
      set $scale = $2
   else 
      set $scale = ""
   end
   print "$target,$name,$time,$units,$rate,$scale"
   skip
end

